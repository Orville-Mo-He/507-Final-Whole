let data_0 = '{"Drawn and Caricatured: French Cartoonists on the Campaign Trail": {"Star Ferry, \u2018Emblem of Hong Kong,\u2019 May Sail Into History After 142 Years": 96, "The W.H.O. chief arrives in India, amid a tussle over Covid death estimates.": 26, "Here\u2019s how to handle some of the most irritating workplace habits when you return to the office.": 61, "Despair in Mariupol\u2019s last stronghold: \u2018They\u2019re bombing us with everything\u2019": 114, "Russia\u2019s Thrust in Eastern Ukraine Combines Firepower and New Caution": 104, "More Cautious, Russia Embarks on New Phase of Ukraine War": 104, "The U.S. Races to Arm Ukraine With Heavier, More Advanced Weaponry": 123, "Myanmar\u2019s Health System Is in Collapse, \u2018Obliterated\u2019 by the Regime": 71, "The U.N.\u2019s humanitarian chief said he tested positive for the coronavirus after attending in-person meetings.": 34}, "Star Ferry, \u2018Emblem of Hong Kong,\u2019 May Sail Into History After 142 Years": {"Drawn and Caricatured: French Cartoonists on the Campaign Trail": 96, "The W.H.O. chief arrives in India, amid a tussle over Covid death estimates.": 37, "Here\u2019s how to handle some of the most irritating workplace habits when you return to the office.": 67, "Despair in Mariupol\u2019s last stronghold: \u2018They\u2019re bombing us with everything\u2019": 109, "Russia\u2019s Thrust in Eastern Ukraine Combines Firepower and New Caution": 98, "More Cautious, Russia Embarks on New Phase of Ukraine War": 104, "The U.S. Races to Arm Ukraine With Heavier, More Advanced Weaponry": 124, "Myanmar\u2019s Health System Is in Collapse, \u2018Obliterated\u2019 by the Regime": 86, "The U.N.\u2019s humanitarian chief said he tested positive for the coronavirus after attending in-person meetings.": 37}, "The W.H.O. chief arrives in India, amid a tussle over Covid death estimates.": {"Drawn and Caricatured: French Cartoonists on the Campaign Trail": 26, "Star Ferry, \u2018Emblem of Hong Kong,\u2019 May Sail Into History After 142 Years": 37, "Here\u2019s how to handle some of the most irritating workplace habits when you return to the office.": 19, "Despair in Mariupol\u2019s last stronghold: \u2018They\u2019re bombing us with everything\u2019": 44, "Russia\u2019s Thrust in Eastern Ukraine Combines Firepower and New Caution": 33, "More Cautious, Russia Embarks on New Phase of Ukraine War": 38, "The U.S. Races to Arm Ukraine With Heavier, More Advanced Weaponry": 54, "Myanmar\u2019s Health System Is in Collapse, \u2018Obliterated\u2019 by the Regime": 39, "The U.N.\u2019s humanitarian chief said he tested positive for the coronavirus after attending in-person meetings.": 18}, "Here\u2019s how to handle some of the most irritating workplace habits when you return to the office.": {"Drawn and Caricatured: French Cartoonists on the Campaign Trail": 61, "Star Ferry, \u2018Emblem of Hong Kong,\u2019 May Sail Into History After 142 Years": 67, "The W.H.O. chief arrives in India, amid a tussle over Covid death estimates.": 19, "Despair in Mariupol\u2019s last stronghold: \u2018They\u2019re bombing us with everything\u2019": 59, "Russia\u2019s Thrust in Eastern Ukraine Combines Firepower and New Caution": 52, "More Cautious, Russia Embarks on New Phase of Ukraine War": 52, "The U.S. Races to Arm Ukraine With Heavier, More Advanced Weaponry": 80, "Myanmar\u2019s Health System Is in Collapse, \u2018Obliterated\u2019 by the Regime": 58, "The U.N.\u2019s humanitarian chief said he tested positive for the coronavirus after attending in-person meetings.": 30}, "Despair in Mariupol\u2019s last stronghold: \u2018They\u2019re bombing us with everything\u2019": {"Drawn and Caricatured: French Cartoonists on the Campaign Trail": 114, "Star Ferry, \u2018Emblem of Hong Kong,\u2019 May Sail Into History After 142 Years": 109, "The W.H.O. chief arrives in India, amid a tussle over Covid death estimates.": 44, "Here\u2019s how to handle some of the most irritating workplace habits when you return to the office.": 59, "Russia\u2019s Thrust in Eastern Ukraine Combines Firepower and New Caution": 156, "More Cautious, Russia Embarks on New Phase of Ukraine War": 182, "The U.S. Races to Arm Ukraine With Heavier, More Advanced Weaponry": 173, "Myanmar\u2019s Health System Is in Collapse, \u2018Obliterated\u2019 by the Regime": 105, "The U.N.\u2019s humanitarian chief said he tested positive for the coronavirus after attending in-person meetings.": 45}, "Russia\u2019s Thrust in Eastern Ukraine Combines Firepower and New Caution": {"Drawn and Caricatured: French Cartoonists on the Campaign Trail": 104, "Star Ferry, \u2018Emblem of Hong Kong,\u2019 May Sail Into History After 142 Years": 98, "The W.H.O. chief arrives in India, amid a tussle over Covid death estimates.": 33, "Here\u2019s how to handle some of the most irritating workplace habits when you return to the office.": 52, "Despair in Mariupol\u2019s last stronghold: \u2018They\u2019re bombing us with everything\u2019": 156, "More Cautious, Russia Embarks on New Phase of Ukraine War": 269, "The U.S. Races to Arm Ukraine With Heavier, More Advanced Weaponry": 181, "Myanmar\u2019s Health System Is in Collapse, \u2018Obliterated\u2019 by the Regime": 89, "The U.N.\u2019s humanitarian chief said he tested positive for the coronavirus after attending in-person meetings.": 38}, "More Cautious, Russia Embarks on New Phase of Ukraine War": {"Drawn and Caricatured: French Cartoonists on the Campaign Trail": 104, "Star Ferry, \u2018Emblem of Hong Kong,\u2019 May Sail Into History After 142 Years": 104, "The W.H.O. chief arrives in India, amid a tussle over Covid death estimates.": 38, "Here\u2019s how to handle some of the most irritating workplace habits when you return to the office.": 52, "Despair in Mariupol\u2019s last stronghold: \u2018They\u2019re bombing us with everything\u2019": 182, "Russia\u2019s Thrust in Eastern Ukraine Combines Firepower and New Caution": 269, "The U.S. Races to Arm Ukraine With Heavier, More Advanced Weaponry": 221, "Myanmar\u2019s Health System Is in Collapse, \u2018Obliterated\u2019 by the Regime": 102, "The U.N.\u2019s humanitarian chief said he tested positive for the coronavirus after attending in-person meetings.": 39}, "The U.S. Races to Arm Ukraine With Heavier, More Advanced Weaponry": {"Drawn and Caricatured: French Cartoonists on the Campaign Trail": 123, "Star Ferry, \u2018Emblem of Hong Kong,\u2019 May Sail Into History After 142 Years": 124, "The W.H.O. chief arrives in India, amid a tussle over Covid death estimates.": 54, "Here\u2019s how to handle some of the most irritating workplace habits when you return to the office.": 80, "Despair in Mariupol\u2019s last stronghold: \u2018They\u2019re bombing us with everything\u2019": 173, "Russia\u2019s Thrust in Eastern Ukraine Combines Firepower and New Caution": 181, "More Cautious, Russia Embarks on New Phase of Ukraine War": 221, "Myanmar\u2019s Health System Is in Collapse, \u2018Obliterated\u2019 by the Regime": 116, "The U.N.\u2019s humanitarian chief said he tested positive for the coronavirus after attending in-person meetings.": 57}, "Myanmar\u2019s Health System Is in Collapse, \u2018Obliterated\u2019 by the Regime": {"Drawn and Caricatured: French Cartoonists on the Campaign Trail": 71, "Star Ferry, \u2018Emblem of Hong Kong,\u2019 May Sail Into History After 142 Years": 86, "The W.H.O. chief arrives in India, amid a tussle over Covid death estimates.": 39, "Here\u2019s how to handle some of the most irritating workplace habits when you return to the office.": 58, "Despair in Mariupol\u2019s last stronghold: \u2018They\u2019re bombing us with everything\u2019": 105, "Russia\u2019s Thrust in Eastern Ukraine Combines Firepower and New Caution": 89, "More Cautious, Russia Embarks on New Phase of Ukraine War": 102, "The U.S. Races to Arm Ukraine With Heavier, More Advanced Weaponry": 116, "The U.N.\u2019s humanitarian chief said he tested positive for the coronavirus after attending in-person meetings.": 43}, "The U.N.\u2019s humanitarian chief said he tested positive for the coronavirus after attending in-person meetings.": {"Drawn and Caricatured: French Cartoonists on the Campaign Trail": 34, "Star Ferry, \u2018Emblem of Hong Kong,\u2019 May Sail Into History After 142 Years": 37, "The W.H.O. chief arrives in India, amid a tussle over Covid death estimates.": 18, "Here\u2019s how to handle some of the most irritating workplace habits when you return to the office.": 30, "Despair in Mariupol\u2019s last stronghold: \u2018They\u2019re bombing us with everything\u2019": 45, "Russia\u2019s Thrust in Eastern Ukraine Combines Firepower and New Caution": 38, "More Cautious, Russia Embarks on New Phase of Ukraine War": 39, "The U.S. Races to Arm Ukraine With Heavier, More Advanced Weaponry": 57, "Myanmar\u2019s Health System Is in Collapse, \u2018Obliterated\u2019 by the Regime": 43}}'
let min_max = JSON.parse('{"max": 126, "min": 26}')
let min = min_max['min']
let max = min_max['max']
console.log(min)
let data = JSON.parse(data_0)
let headlines_ie_keys = Object.keys(data);

// console.log('Data.type')
// console.log(typeof(data));
// // object

// console.log('\nData[0]')
// console.log(data["Drawn and Caricatured: French Cartoonists on the Campaign Trail"]);
// // the whole dictionary

// console.log('\nData[0][0].type')
// console.log(typeof(data["Drawn and Caricatured: French Cartoonists on the Campaign Trail"]["Star Ferry, ‘Emblem of Hong Kong,’ May Sail Into History After 142 Years"]));
// // number

// console.log('\nData[0][0]')
// console.log(data["Drawn and Caricatured: French Cartoonists on the Campaign Trail"]["Star Ferry, ‘Emblem of Hong Kong,’ May Sail Into History After 142 Years"]);
// // 96

// console.log('\nKeys: type, key[1], and headlines_ie_keys.length')
// console.log(typeof(headlines_ie_keys));
// // object
// console.log(headlines_ie_keys[1]);
// // Star Ferry, ‘Emblem of Hong Kong,’ May Sail Into History After 142 Years

// console.log(headlines_ie_keys.length);
// // 10




// P5 Section





let x_feeds = []
let y_feeds = []
let x_offsets = []
let y_offsets = []
let headlines_to_show = []
let starting_pt, h;
let whole_h
let stroke_weight
let weights_keys


function setup() {
    starting_pt = 400;
    h = windowHeight;
    whole_h = document.body.scrollHeight;

    // canvas = createCanvas(document.body.clientWidth+(16), document.body.scrollHeight);
    if(h > whole_h){
        canvas = createCanvas(windowWidth, 1.1*h);
    } else if(h < whole_h){
        canvas = createCanvas(windowWidth, 1.1*whole_h);
    };


    canvas.position(0, 0);
    canvas.style('z-index', '-1');
    // console.log(data.headline);
    // console.log('hi')

    textFont('prestige-elite-std')

    for(i=0; i < headlines_ie_keys.length; i++){

        x_offsets[i] = random(0, 0.001);
        y_offsets[i] = random(0, 0.001);

        x_feeds[i] = random(0, 100);
        y_feeds[i] = random(0, 500);

        headlines_to_show[i] = new Headline(String(headlines_ie_keys[i]), x_offsets[i], y_offsets[i], x_feeds[i], y_feeds[i]);

    };
};

function windowResized() {

    starting_pt = 300;
    h = windowHeight;
    whole_h = document.body.scrollHeight

    if(h > whole_h){
        resizeCanvas(windowWidth, 1.1*h);
    } else if(h < whole_h){
        resizeCanvas(windowWidth, 1.1*whole_h);
    };    // canvas.style('width', windowWidth);
    // canvas.style('height', document.body.scrollHeight);

};


class Headline{

    constructor(_string, _x_offset, _y_offset, _x_feed, _y_feed){
        this._string = _string;
        this.x_offset = _x_offset;
        this.y_offset = _y_offset;
        this.x_feed = _x_feed;
        this.y_feed = _y_feed;
        this.x;
        this.y;
    };

    show(){
        this.place_and_move()
        text(this._string, this.x, this.y, 200, 500);
    };
    place_and_move(){
        this.x = map(noise(this.x_feed), 0, 1, starting_pt, windowWidth);
        this.y = map(noise(this.y_feed), 0, 1, 0, windowHeight);
        this.x_feed += this.x_offset;
        this.y_feed += this.y_offset;
    };
}

function draw(){

    background(0);

    rect(0, 0, 500, canvas.height)

    noStroke();

    push()
    textSize(30)
    fill(255)
    text('Headlines of the Day', windowWidth/2, 100)
    for(i=0; i<headlines_ie_keys.length; i++){

        textStyle(BOLD);
        textSize(16)
        headlines_to_show[i].show();

    };
    pop()

    push()
    strokeCap(SQUARE);
    stroke(255, 255, 255, 30);
    fill(255, 255, 255, 30);

    for(i=0; i<headlines_ie_keys.length; i++){

        weights_keys = Object.keys(data[String(headlines_ie_keys[i])])

        for(u=0; u<weights_keys.length; u++){
            push()
            stroke_weight = map(data[headlines_ie_keys[i]][weights_keys[u]], min, max, 1, 10)
            strokeWeight(stroke_weight)
            line(headlines_to_show[i].x-20, headlines_to_show[i].y, headlines_to_show[u].x-20, headlines_to_show[u].y)
            pop()
        }
        circle(headlines_to_show[i].x-20, headlines_to_show[i].y, 20)
    };
    pop()
    // separated because if together, there would be no x or y for
    // headlines_to_show[u]

};

